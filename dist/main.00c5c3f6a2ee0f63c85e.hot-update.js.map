{"version":3,"file":"main.00c5c3f6a2ee0f63c85e.hot-update.js","mappings":";;;;;;;;;;;;;;;;;;;;;AAoGA;AAAA;AAnGA;AAAA;AAAA;AAAA;AAAA;AADA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AAAA;AACA;AAEA;AAAA;AAAA;AAAA;AACA;AAEA;AAAA;AACA;AAEA;AAAA;AAAA;AAAA;AACA;AAEA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AAEA;AAAA;AAAA;AACA;AACA;AAAA;AACA;AACA;AAAA;AAAA;AACA;AAEA;AAAA;AACA;AACA;AAAA;AAAA;AACA;AAEA;AAAA;AACA;AACA;AAAA;AAAA;AACA;AAEA;AACA;AAAA;AAEA;AAGA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AACA;AACA;AAAA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AACA;AACA;AAAA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AACA;AACA;AAAA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AACA;AAAA;AAAA;AACA;AAAA;AACA;AAEA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AADA;AAEA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AADA;AAEA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAJA;AAMA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;ACnHA","sources":["webpack://adiba-central/./src/member/redux/_redux/authRedux.js","webpack://adiba-central/webpack/runtime/getFullHash"],"sourcesContent":["import { persistReducer } from \"redux-persist\";\r\nimport storage from \"redux-persist/lib/storage\";\r\nimport { put, takeLatest } from \"redux-saga/effects\";\r\nimport { getUserByToken } from \"./authCrud\";\r\n\r\nexport const actionTypes = {\r\n  Login: \"[Login] Action\",\r\n  Logout: \"[Logout] Action\",\r\n  Register: \"[Register] Action\",\r\n  UserRequested: \"[Request User] Action\",\r\n  UserLoaded: \"[Load User] Auth API\",\r\n  OrgLoaded: \"REQUEST ORG\",\r\n  Error: \"Set Error\",\r\n  RESET_TOKEN: \"[RESET] TOKEN\",\r\n};\r\n\r\nconst initialAuthState = {\r\n  user: undefined,\r\n  organization: undefined,\r\n  authToken: undefined,\r\n  error: null,\r\n};\r\n\r\nfunction forwardTo(location) {\r\n  history.push(location);\r\n}\r\n\r\nexport const reducer = persistReducer(\r\n  {\r\n    storage,\r\n    key: \"v706-demo3-auth\",\r\n    whitelist: [\"user\", \"authToken\", \"organization\"],\r\n  },\r\n  (state = initialAuthState, action) => {\r\n    switch (action.type) {\r\n      case actionTypes.Login: {\r\n        const { authToken } = action.payload;\r\n\r\n        return { authToken, user: undefined };\r\n      }\r\n\r\n      case actionTypes.Register: {\r\n        const { authToken } = action.payload;\r\n\r\n        return { authToken, user: undefined };\r\n      }\r\n\r\n      case actionTypes.Logout: {\r\n        // TODO: Change this code. Actions in reducer aren't allowed.\r\n        return initialAuthState;\r\n      }\r\n      case actionTypes.RESET_TOKEN: {\r\n        const { authToken } = action.payload;\r\n\r\n        return { ...state, authToken };\r\n      }\r\n      case actionTypes.UserLoaded: {\r\n        const { user } = action.payload;\r\n        return { ...state, user };\r\n      }\r\n\r\n      case actionTypes.OrgLoaded: {\r\n        const { organization } = action.payload;\r\n        return { ...state, organization };\r\n      }\r\n\r\n      case actionTypes.Error: {\r\n        const { error } = action.payload;\r\n        return { ...state, error };\r\n      }\r\n\r\n      default:\r\n        return state;\r\n    }\r\n  }\r\n);\r\n\r\nexport const actions = {\r\n  // login: (authToken) => ({ type: actionTypes.Login, payload: { authToken } }),\r\n  login: (user) => ({ type: actionTypes.UserLoaded, payload: { user } }),\r\n  register: (data) => ({\r\n    type: actionTypes.Register,\r\n    payload: { data },\r\n  }),\r\n  logout: () => ({ type: actionTypes.Logout }),\r\n  requestUser: (user) => ({\r\n    type: actionTypes.UserRequested,\r\n    payload: { user },\r\n  }),\r\n  fulfillUser: (user) => ({ type: actionTypes.UserLoaded, payload: { user } }),\r\n  fulfillOrg: (data) => ({\r\n    type: actionTypes.OrgLoaded,\r\n    payload: { organization: data },\r\n  }),\r\n  fulfillToken: (authToken) => ({\r\n    type: actionTypes.RESET_TOKEN,\r\n    payload: { authToken: authToken },\r\n  }),\r\n};\r\n\r\nexport function* saga() {\r\n  yield takeLatest(actionTypes.Login, function* loginSaga() {\r\n    yield put(actions.requestUser());\r\n  });\r\n\r\n  yield takeLatest(actionTypes.Register, function* registerSaga() {\r\n    yield put(actions.requestUser());\r\n  });\r\n\r\n  yield takeLatest(actionTypes.UserRequested, function* userRequested() {\r\n    const { data } = yield getUserByToken();\r\n\r\n    if (data.data.type === \"administrator\") {\r\n      yield put(actions.fulfillUser(data.data));\r\n    }\r\n  });\r\n}\r\n","__webpack_require__.h = () => (\"83ab2176273ac7061c2f\")"],"names":[],"sourceRoot":""}